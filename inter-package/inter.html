<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>International Packages - Travel the World</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../footer.css" />
    <style>
      :root {
        --primary-color: #667eea;
        --secondary-color: #764ba2;
        --accent-color: #56bc57;
        --dark-color: #1a1a1a;
        --light-color: #f8f9fa;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        line-height: 1.6;
        color: var(--dark-color);
        background-color: #f8f9fa;
      }

      .navbar {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      }

      .navbar-brand img {
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .nav-link {
        font-weight: 500;
        color: #333 !important;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link:hover {
        color: #56bc57 !important;
        transform: translateY(-2px);
      }

      .nav-link.active {
        color: #56bc57 !important;
      }

      .nav-link.active::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 3px;
        background: #56bc57;
        border-radius: 2px;
      }
      .navbar-nav {
        display: flex;
        align-items: center;
        gap: 3rem;
      }
      .hero-section {
        background: linear-gradient(
          135deg,
          #1e8a9a,
          #1f8b98,
          #2c9888,
          #34a07e,
          #3da475,
          #4bb368,
          #56bc57
        );
        color: white;
        padding: 100px 0 50px 0;
        text-align: start;
      }

      .hero-section h1 {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 15px;
      }

      .hero-section p {
        font-size: 1rem;
        opacity: 0.9;
      }
    </style>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f5f7fa;
      }

      .header {
        background: linear-gradient(135deg, #52c4a0 0%, #3a9b7a 100%);
        color: white;
        padding: 50px 0;
      }

      .header h1 {
        font-size: 2.8rem;
        font-weight: 700;
        margin-bottom: 15px;
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
      }

      .packages-container {
        padding: 60px 0;
      }

      /* Package Card - Similar to bharat-package domestic location cards */
      .package-card {
        background: white;
        padding: 20px;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        margin-bottom: 25px;
        cursor: pointer;
      }

      .package-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .package-image {
        border-radius: 16px;
        position: relative;
        overflow: hidden;
        height: 200px;
        background-size: cover;
        background-position: center;
      }

      .package-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        background: rgba(82, 196, 160, 0.9);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .package-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
      }

      .package-info {
        flex: 1;
        text-align: left;
      }

      .package-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 5px;
        line-height: 1.3;
      }

      .package-meta {
        display: flex;
        gap: 15px;
        font-size: 0.9rem;
        color: #666;
      }

      .package-meta span {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .package-meta i {
        color: #52c4a0;
      }

      .package-price-section {
        text-align: right;
      }

      .current-price {
        font-size: 1.4rem;
        font-weight: 700;
        color: #2c3e50;
      }

      .tax-info {
        font-size: 0.8rem;
        color: #666;
        text-align: right;
        margin-top: 3px;
      }

      /* Removed booking button styling since we're removing it */

      .loading-spinner {
        display: none;
        text-align: center;
        padding: 60px;
      }

      .error-message {
        display: none;
        text-align: center;
        padding: 60px;
        color: #e74c3c;
      }

      .no-results {
        text-align: center;
        padding: 60px;
        color: #666;
      }

      /* Show only two cards per row */
      .packages-container .row {
        display: flex;
        flex-wrap: wrap;
      }

      .packages-container .row > [class*="col-"] {
        flex: 0 0 50%;
        max-width: 50%;
      }

      /* Responsive improvements */
      @media (max-width: 1200px) {
        .package-image {
          height: 190px;
        }

        .package-title {
          font-size: 1.1rem;
        }

        .current-price {
          font-size: 1.3rem;
        }
      }

      @media (max-width: 992px) {
        .hero-section {
          padding: 80px 0 40px 0;
        }

        .hero-section h1 {
          font-size: 2rem;
        }

        .packages-container {
          padding: 50px 0;
        }

        .package-image {
          height: 180px;
        }

        /* Maintain two cards per row on medium screens */
        .packages-container .row > [class*="col-"] {
          flex: 0 0 50%;
          max-width: 50%;
        }
      }

      @media (max-width: 768px) {
        .hero-section h1 {
          font-size: 1.8rem;
        }

        .hero-section p {
          font-size: 0.95rem;
        }

        .package-image {
          height: 180px;
        }

        .package-title {
          font-size: 1.1rem;
        }

        .current-price {
          font-size: 1.2rem;
        }

        .packages-container {
          padding: 40px 0;
        }

        /* One card per row on small screens */
        .packages-container .row > [class*="col-"] {
          flex: 0 0 100%;
          max-width: 100%;
        }
        
        /* Mobile alignment fixes */
        .package-content {
          flex-direction: column;
          text-align: center;
        }
        
        .package-info {
          margin-bottom: 15px;
          text-align: center;
        }
        
        .package-meta {
          justify-content: center;
          flex-wrap: wrap;
        }
        
        .package-price-section {
          text-align: center;
        }
        
        .tax-info {
          text-align: center;
        }
      }

      @media (max-width: 576px) {
        .package-image {
          height: 160px;
        }

        .package-content {
          padding: 15px;
          flex-direction: column;
          text-align: center;
        }
        
        .package-info {
          margin-bottom: 15px;
          text-align: center;
        }
        
        .package-meta {
          flex-direction: column;
          gap: 8px;
          align-items: center;
        }
        
        .package-price-section {
          text-align: center;
        }
        
        .tax-info {
          text-align: center;
        }

        .hero-section {
          padding: 60px 0 30px 0;
        }

        .hero-section h1 {
          font-size: 1.6rem;
        }

        .packages-container {
          padding: 30px 0;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
      <div class="container">
        <a class="navbar-brand" href="./index.html">
          <img src="../images/EZILogo.png" alt="EZI Logo" height="40" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="../index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="../package.html">Package</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../about.html">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../BlogPage.html">Blog</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <section class="hero-section">
      <div class="container">
        <h1>International Packages</h1>
        <p>
          Fill out the form below and our travel experts will create a
          customized itinerary just for you.
        </p>
      </div>
    </section>

    <div class="container">
      <!-- Filter Section -->
      <div class="row mb-4 mt-2 justify-content-end">
        <div class="col-md-3">
          <select
            id="countryFilter"
            class="form-select rounded-lg"
            onchange="filterByCountry()"
          >
            <option value="">All Countries</option>
          </select>
        </div>
      </div>
    </div>

    <div class="packages-container">
      <div class="container">
        <div class="loading-spinner">
          <div
            class="spinner-border text-success"
            role="status"
            style="width: 3rem; height: 3rem"
          >
            <span class="visually-hidden">Loading...</span>
          </div>
          <h4 class="mt-3">Loading Amazing Packages...</h4>
          <p>Please wait while we fetch the best deals for you</p>
        </div>

        <div class="error-message">
          <i class="fas fa-exclamation-triangle fa-4x mb-3"></i>
          <h4>Oops! Something went wrong</h4>
          <p>We couldn't load the packages right now. Please try again.</p>
          <button class="btn btn-success" onclick="loadPackages()">
            <i class="fas fa-redo me-2"></i>Try Again
          </button>
        </div>

        <div class="row" id="packagesGrid">
          <!-- Packages will be loaded here -->
        </div>

        <div class="no-results" id="noResults" style="display: none">
          <i class="fas fa-search fa-3x mb-3"></i>
          <h4>No packages found</h4>
          <p>Try adjusting your search criteria to find more options.</p>
        </div>
      </div>
    </div>
    <footer class="site-footer text-white py-5">
      <div class="container">
        <!-- Logo Section -->

        <div class="row">
          <!-- About Us Section -->
          <div class="col-lg-3 col-md-6 mb-4">
            <div class="footer-section">
              <h5><i class="fas fa-info-circle me-2"></i>About Us</h5>
              <div class="logo-container">
                <a href="/">
                  <img src="../images/EZILogo.png" alt="EZI Logo" />
                </a>
              </div>
              <p class="footer-text">
                EZIO TRAVELS PRIVATE LIMITED is your trusted partner for
                exceptional travel experiences. We specialize in creating
                memorable journeys with personalized service and competitive
                prices.
              </p>

              <div class="social-links">
                <a
                  href="https://www.facebook.com/TravelwithEZIO"
                  target="_blank"
                  class="social-link"
                  title="Facebook"
                >
                  <i class="bi bi-facebook"></i>
                </a>
                <a
                  href="https://x.com/eziotravels"
                  class="social-link"
                  target="_blank"
                  title="Twitter"
                >
                  <i class="bi bi-twitter-x"></i>
                </a>
                <a
                  href="https://www.instagram.com/travel_with_ezio/?hl=en"
                  target="_blank"
                  class="social-link"
                  title="Instagram"
                >
                  <i class="bi bi-instagram"></i>
                </a>
                <a
                  href="https://www.linkedin.com/company/ezio-travel/"
                  target="_blank"
                  class="social-link"
                  title="LinkedIn"
                >
                  <i class="bi bi-linkedin"></i>
                </a>
              </div>
            </div>
          </div>

          <!-- Contact Us Section -->
          <div class="col-lg-3 col-md-6 mb-4">
            <div class="footer-section">
              <h5><i class="fas fa-phone me-2"></i>Contact Us</h5>
              <div class="contact-info">
                <div class="contact-item">
                  <i class="fas fa-building"></i>
                  <div>
                    <strong>EZIO TRAVELS PRIVATE LIMITED</strong>
                  </div>
                </div>
                <div class="contact-item">
                  <i class="fas fa-map-marker-alt"></i>
                  <div>
                    REGUS WTT, TOWER B 16TH FLOOR,<br />
                    NOIDA 16, UP 201301
                  </div>
                </div>
                <div class="contact-item">
                  <i class="fas fa-envelope"></i>
                  <div>
                    <a href="mailto:namaste@eziotravels.com" class="footer-link"
                      >namaste@eziotravels.com</a
                    >
                  </div>
                </div>
                <div class="contact-item">
                  <i class="fas fa-phone"></i>
                  <div>
                    <a href="tel:+9198108 33897" class="footer-link"
                      >+91 98108 33897</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Links Section -->
          <div class="col-lg-3 col-md-6 mb-4">
            <div class="footer-section">
              <h5><i class="fas fa-link me-2"></i>Quick Links</h5>
              <div class="d-flex flex-column">
                <a href="../about.html" class="footer-link">
                  <i class="fas fa-chevron-right me-2"></i>About Us
                </a>
                <a href="../BlogPage.html" class="footer-link">
                  <i class="fas fa-chevron-right me-2"></i>Blog
                </a>
                <a href="../index.html" class="footer-link">
                  <i class="fas fa-chevron-right me-2"></i>Home
                </a>
                <a href="../contact.html" class="footer-link">
                  <i class="fas fa-chevron-right me-2"></i>Contact Us
                </a>
              </div>
            </div>
          </div>

          <!-- Legal & Policies Section -->

          <div class="col-lg-3 col-md-6 mb-4">
            <div class="footer-section">
              <h5><i class="fas fa-shield-alt me-2"></i>Legal & Policies</h5>
              <div class="d-flex flex-column">
                <a
                  href="../privacyPolicy.html"
                  class="footer-link"
                  target="_blank"
                >
                  <i class="fas fa-user-shield me-2"></i>Privacy Policy
                </a>
                <a
                  href="../term&condition.html"
                  class="footer-link"
                  target="_blank"
                >
                  <i class="fas fa-file-contract me-2"></i>Terms & Conditions
                </a>
                <!-- <a href="./shippingPolicy.html" class="footer-link" target="_blank">
                                <i class="fas fa-shipping-fast me-2"></i>Shipping & Delivery Policy
                            </a> -->
                <a
                  href="../refundPolicy.html"
                  class="footer-link"
                  target="_blank"
                >
                  <i class="fas fa-undo-alt me-2"></i>Refund & Cancellation
                  Policy
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
          <div class="row align-items-center">
            <div>
              <p class="copyright-text">
                &copy; 2024 All Rights Reserved by
                <strong>EZIO TRAVELS PRIVATE LIMITED</strong>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
      // API Configuration
      const API_BASE_URL = "https://eziotravels.com/api/web";

      // State management
      let allPackages = [];
      let filteredPackages = [];
      let favorites = JSON.parse(sessionStorage.getItem("favorites") || "[]");
      let availableCities = [];

      // Get URL parameters
      function getUrlParameter(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
        var results = regex.exec(window.location.search);
        return results === null
          ? ""
          : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      // Load packages based on URL parameters
      async function loadPackages() {
        const loadingSpinner = document.querySelector(".loading-spinner");
        const errorMessage = document.querySelector(".error-message");
        const packagesGrid = document.getElementById("packagesGrid");

        loadingSpinner.style.display = "block";
        errorMessage.style.display = "none";
        packagesGrid.innerHTML = "";

        try {
          let packages = [];

          // Check for category or country parameter
          const category = getUrlParameter("category");
          const country = getUrlParameter("country");

          if (category) {
            // Load packages by category
            const response = await fetch(
              `${API_BASE_URL}/intl_by_category/${category}`
            );
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            packages = data.packages || [];
            availableCities = data.countries || [];
          } else if (country) {
            // Load packages by country
            const response = await fetch(
              `${API_BASE_URL}/intl_by_country/${country}`
            );
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            packages = data.packages || [];
            availableCities = data.countries || [];
          } else {
            // Load all international packages (fallback)
            const response = await fetch(
              `${API_BASE_URL}/international_packages_home`
            );
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            packages = data.packages || [];
            availableCities = data.countries || [];
          }

          // Process API data
          allPackages = processPackagesData(packages);
          filteredPackages = [...allPackages];

          // Populate country filter
          populateCountryFilter();

          // Render packages
          renderPackages(filteredPackages);
          loadingSpinner.style.display = "none";
        } catch (error) {
          console.error("Error loading packages:", error);
          loadingSpinner.style.display = "none";
          errorMessage.style.display = "block";
        }
      }

      // Process packages data from API to match our format
      function processPackagesData(packages) {
        return packages.map((pkg) => {
          // Get the cover image if available
          const coverImage = (pkg.images &&
            pkg.images.find((img) => img.isCover)) ||
            (pkg.images && pkg.images[0]) || {
              url: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",
            };

          // Calculate total price (price + tax)
          const totalPrice = pkg.price
          const tax = pkg.tax || 0;

          // Get duration in days
          const days = pkg.days || 1;
          const nights = pkg.nights || 0;

          // Get country information
          const country = pkg.country || "International";

          return {
            id: pkg.id,
            title: pkg.name,
            state: pkg.state,
            city: pkg.city,
            country: country,
            location: `${pkg.city ? pkg.city + ", " : ""}${country}`,
            image: coverImage.url,
            duration: `${days} Day${days > 1 ? "s" : ""}`,
            currentPrice: totalPrice,
            tax: tax,
            badge: pkg.category || "Popular",
            days: days,
            nights: nights,
            providedBy: pkg.providedBy || ""
          };
        });
      }

      // Populate country filter
      function populateCountryFilter() {
        const countryFilter = document.getElementById("countryFilter");

        // Populate countries
        if (availableCities.length > 0) {
          countryFilter.innerHTML =
            '<option value="">All Countries</option>' +
            availableCities
              .map((country) => `<option value="${country}">${country}</option>`)
              .join("");
        } else {
          // Fallback to unique countries from packages
          const countries = [
            ...new Set(allPackages.map((pkg) => pkg.country)),
          ].sort();
          countryFilter.innerHTML =
            '<option value="">All Countries</option>' +
            countries
              .map((country) => `<option value="${country}">${country}</option>`)
              .join("");
        }
      }

      // Filter packages by country
      function filterByCountry() {
        const countryFilter = document.getElementById("countryFilter");
        const selectedCountry = countryFilter.value;

        let filtered = [];

        if (selectedCountry) {
          filtered = allPackages.filter((pkg) => pkg.country === selectedCountry);
        } else {
          filtered = [...allPackages];
        }

        filteredPackages = filtered;
        renderPackages(filteredPackages);
      }

      function renderPackages(packages) {
        const packagesGrid = document.getElementById("packagesGrid");
        const noResults = document.getElementById("noResults");

        if (packages.length === 0) {
          packagesGrid.innerHTML = "";
          noResults.style.display = "block";
          return;
        }

        noResults.style.display = "none";
        packagesGrid.innerHTML = packages
          .map(
            (pkg) => `
                <div class="col-lg-6 col-md-6 col-sm-12">
                  <a href="/package-detail.html?id=${pkg.id}" style="text-decoration: none;">
                    <div class="package-card">
                        <div class="package-image" style="background-image: url('${pkg.image}')">
                            <div class="package-badge">${pkg.badge}</div>
                        </div>
                        <div class="package-content">
                            <div class="package-info">
                                <h5 class="package-title">${pkg.title}</h5>
                                <div class="package-meta">
                                    <span>
                                        <i class="fas fa-calendar-days"></i>
                                        ${pkg.days}D/${pkg.nights}N
                                    </span>
                                    <span>
                                        <i class="fas fa-globe"></i>
                                        ${pkg.country}
                                    </span>
                                    ${pkg.providedBy ? `
                                    <span>
                                        <i class="fas fa-building"></i>
                                        ${pkg.providedBy}
                                    </span>
                                    ` : ''}
                                </div>
                            </div>
                            <div class="package-price-section">
                               <div class="current-price">₹${pkg.currentPrice.toLocaleString()}</div>
                               <div class="tax-info">${pkg.tax > 0 ? `+ ₹${pkg.tax.toLocaleString()} ` : ''}Taxes & fees per person</div>
                            </div>
                        </div>
                    </div>
                    </a>
                </div>
            `
          )
          .join("");
      }

      function toggleFavorite(packageId) {
        const index = favorites.indexOf(packageId);
        if (index > -1) {
          favorites.splice(index, 1);
        } else {
          favorites.push(packageId);
        }
        sessionStorage.setItem("favorites", JSON.stringify(favorites));

        // Update the heart icon
        const heartBtn = document.querySelector(
          `[onclick="toggleFavorite(${packageId})"]`
        );
        if (heartBtn) {
          heartBtn.classList.toggle("active");
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        loadPackages();
      });
    </script>
  </body>
</html>
